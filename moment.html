<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>タイトルが入ります</title>
<link rel="stylesheet" href="css/style.css">
<script src="http://cdnjs.cloudflare.com/ajax/libs/moment.js/2.8.2/moment.min.js"></script>
</head>
<script>
/*
// momentオブジェクトをセット
    var m = moment(); //現在の時刻が入る
    var output = m.format('YYYY年MM月DD日 HH:mm:ss dddd');
    console.log(output); // => 2014年10月24日 11:44:00 Friday

//各単位出力
    var m = moment();
    // 各単位のメソッド

    m.year();    // 年
    m.month();   // 月 ※ 0〜11の値（始まりが0なので-1で計算）
    m.date();   // 日
    m.day();    // 曜日
    m.hours();    // 時
    m.minutes();  // 分
    m.seconds();  // 秒
    m.milliseconds();  // ミリ秒

    console.log(m.year()); // => 2014

// momentオブジェクトをセット、現在時刻でなく指定した日付の場合
    var m = moment("20150101", "YYYYMMDD"); // 第一引数：指定日時、第二引数：フォーマット
    var output = m.format('YYYY年MM月DD日 HH:mm:ss dddd');

    console.log(output); // => 2015年01月01日 00:00:00 Thursday

//今日から指定日まで何日か？加算の場合はadd()、減算の場合はsubtract()を使う
    var output = moment().add(30, 'days').format('YYYY年MM月DD日'); // add第一引数：日数、第二引数：単位

    console.log(output);  // => 2014年11月23日

//指定日から何日経過したか
var output = moment().diff(moment([2014, 4, 1]), "days");

console.log(output);  // => 176
*/
//==============endDateから7日前(startDate)を計算=======
    /*
    1 31
    2 30
    3 31
    4 30
    5 31
    6 30
    7 31
    8 31
    9 30
    10 31
    11 30
    12 31
    */
var startDate="20160112"
var m=moment(startDate, "YYYYMMDD");
//var output=m.format('YYYY年MM月DD日');
var year=m.year();
var month=m.month()+1;
var day=m.date()-7;
document.write("a");
if(day<1){//日付を-7した時に、繰り下がりが生じる場合
        if(month==1||month==2||month==4||month==6||month==8||month==9||month==11){//前月が31日の時
            document.write("b");
            var day=31+day;
            var month=month-1;
            if(month==0){
                document.write("c");
                months=12;
                var year=year-1;
                var day_str=String(day);
                var month_str=String(months);
                var year_str=String(year);
            
                if(month_str.length==1){
                    document.write("d");
                    var month="0"+month_str;
                }
                if(day_str.length==1){
                    document.write("e");
                var day="0"+day_str;
                }
            }else{
                document.write("f");
                var day_str=String(day);
                var month_str=String(month);
                var year_str=String(year);
        
                if(month_str.length==1){
                    document.write("g");
                    var month="0"+month_str;
                }
                
                if(day_str.length==1){
                    document.write("h");
                    var day="0"+day_str;
                }
            }
        }
    
        if(month==3||month==5||month==7||month==10||month==12){//前月が30日以下の時2月は考慮してない
            document.write("i");
            var day=30+day;
            var month=month-1;
            var day_str=String(day);
            var month_str=String(month);
            var year_str=String(year);
    
            if(month_str.length==1){
                document.write("j");
                var month="0"+month_str;
            }
            if(day_str.length==1){
                document.write("k");
                var day="0"+day_str;
            }
        }
}else{//日付を-7した時に、繰り下がりが生じない場合
        document.write("l");
        var year_str=String(year);
        var month_str=String(month);
        var day_str=String(day);
        if(month_str.length==1){
            document.write("m");
            month_str="0"+month_str;
        }
        if(day_str.length==1){
            document.write("n");
            day_str="0"+day_str;
        }
}
    document.write("o");
    var endDate=year_str+month_str+day_str;
    document.write(endDate);

//===============本日の日付===========================
/*
var m=moment();
var year=m.year();
var month=m.month()+1;
var day=m.date();
document.write("<h1>"+"本日は、"+year+"年"+month+"月"+day+"日"+"</h1>");*/

//========最終月経日の入力から、本日は何週目の何日か計算==================
/*
var output=moment().diff(moment([2016, 4, 1]), "days");//最後の月経日
var wee=output/7;
var week=Math.round(wee);
//document.write(week);
var day=output%7;*/

//========本日からから各year,month,dayを\抽出==========
/*
var dt = new Date();
var year=dt.getFullYear();
var month=dt.getMonth()+1;
var date=dt.getDate();
dateT = ["Sun.","Mon.","Tue.","Wen.","Thurs.","Fri.","Sat."];
var day=dateT[dt.getDay()];*/
//document.write(year);
//document.write(month);
//document.write(date);
//document.write(day);


/*
var today=Date();


var diff = dst.getTime() - src.getTime();
//秒
var second = diff/1000;

//分
var minute = diff/1000*60;

//時
var hour = diff/1000*60*60;

//日
var day = diff/1000*60*60*24;

//年
var day = diff/1000*60*60*24*365;
//
//var cle_month=last_moon.setMonth(last_moon.getMonth() + 10);
//var cle_day=last_moon.setDate(last_moon.getDate() + 10);
//document.write("出産予定日は"+cle_month+"月"+cle_day+"日です");
//
var dt=new Date();
//年
var year=dt.getFullYear();

//月
//1月が0、12月が11。そのため+1をする。
var month=dt.getMonth()+1;

//日
var date=dt.getDate();

//曜日
//日曜が0、土曜日が6。配列を使い曜日に変換する。
dateT = ["Sun.","Mon.","Tue.","Wen.","Thurs.","Fri.","Sat."];
var day=dateT[dt.getDay()];

//時
var hours=dt.getHours();

//分
var minutes=dt.getMinutes();

//秒
var seconds=dt.getSeconds();
*/
</script>
</html>
